version: 2

# 同一exeを複数起動した場合、instances.<番号> を参照します
# 例: 1つ目の起動は instances.1、2つ目は instances.2
instances:
  "1":
    tcp:
      bind_host: "127.0.0.1"
      # port を省略すると、instance=1 の場合 7001 から空きポートを自動探索
      # port: 7001

    serial:
      baud_rate: 115200
      data_bits: 8
      parity: "none"       # none|odd|even|mark|space
      stop_bits: 1           # 1|2
      handshake: "none"    # none|xonxoff|rtscts|dtrdsr
      dtr_enable: false
      rts_enable: false

    device_select:
      preferred_keywords:
        - "CP210"
        - "FTDI"
        - "CH340"
        - "USB Serial"
      # {instance} を使うと番号展開。未使用時は自動で _1, _2... サフィックス付与
      state_file: "serial-bridge.state.json"

    reconnect:
      initial_delay_ms: 500
      max_delay_ms: 10000
      backoff_factor: 2.0

    logging:
      health_log: "serial-bridge.health.jsonl"
      level: "info"
